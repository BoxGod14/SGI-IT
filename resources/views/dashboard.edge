<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dashboard</title>    
    @entryPointStyles('scss')
    <script>
        
        //Tickets por estado
        const statusTickets = {
            labels: [
                '{{State.OPEN}}',
                '{{State.INPROGRESS}}',
                '{{State.SOLVED}}',
            ],
            datasets: [{
                label: 'Tickets/Estado',
                data: [{{OpenTickets[0]['total']}}, {{InProgressTickets[0]['total']}}, {{SolvedTickets[0]['total']}}],
                backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(54, 162, 235)',
                'rgb(255, 205, 86)'
                ],
                hoverOffset: 4
            }]
        };
        //Tickets asignados al usuario
        const asignedTickets = {
            labels: [
                'Tickets asignados',
                'Tickets sin asignar',
            ],
            datasets: [{
                label: 'Tickets',
                data: [{{AssignedTickets}}, {{NoAssignedTickets}}],
                backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(54, 162, 235)'
                ],
                hoverOffset: 4
            }]
        };
    </script>
    <script defer src="{{ asset('assets/app.js') }}"></script>
</head>
<body>
    <main id="swup">
      @include('partials/nav.edge')
    <div>
      @include('partials/header.edge')
      <div>
        {{--
            Implementear boton acceder a mis tickets
            Implementar boton acceder a mis tickets asignados
            Implementa boton crear ticket            
        --}}
        <section class="dashboard">
            <section>
                <a href="{{route('TicketsController.index')}}?requester={{auth.user.id}}">Tickets creados por mi</a>
                <a href="{{route('TicketsController.index')}}?technician={{auth.user.id}}">Tickets asignados a mi</a>
                <a href="#create_ticket" title="Crear ticket" id="create_ticketButton"><i class="material-icons">add</i></a>
            </section>
            <section>
                <div class="kpi"><canvas id="statusTickets"></canvas></div>
                <div class="kpi"><canvas id="asignedTickets"></canvas></div>
            </section>
            
        </section>
        </div>
    </div>
  </main>
  {{ csrfField() }}
  @include('partials/createTicketModal.edge')
</body>
</html>